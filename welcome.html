<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kanasu Bee House - Welcome</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="firebase.js"></script>

<style>
:root{
--primary:#f4b400;
--bg:#fffcf0;
--glass:rgba(255,255,255,.95);
--shadow:0 10px 35px rgba(0,0,0,.06);
}

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Montserrat',sans-serif;
}

body{
background:var(--bg);
color:#2d3436;
min-height:100vh;
}

/* TOPBAR */
.topbar{
display:flex;
justify-content:space-between;
align-items:center;
padding:14px 24px;
background:var(--glass);
position:sticky;
top:0;
z-index:1000;
border-bottom:1px solid rgba(244,180,0,.2);
}

.menu-btn{
width:42px;
height:42px;
border-radius:12px;
border:1px solid #eee;
background:white;
font-size:18px;
cursor:pointer;
transition:.2s;
}

.menu-btn:hover{
background:#fafafa;
}

/* DROPDOWN */
.dropdown{
display:none;
position:absolute;
top:65px;
left:24px;
background:white;
width:280px;
border-radius:16px;
box-shadow:0 18px 45px rgba(0,0,0,.12);
padding:14px;
max-height:450px;
overflow-y:auto;
}

.dropdown.active{
display:block;
}

.dropdown a{
display:block;
padding:10px 12px;
text-decoration:none;
color:#444;
font-weight:600;
border-radius:10px;
font-size:14px;
transition:.2s;
}

.dropdown a:hover{
background:rgba(244,180,0,.12);
color:var(--primary);
}

.section-title{
font-size:11px;
color:#999;
margin:10px 0 6px;
letter-spacing:.5px;
}

/* MAIN */
.main{
max-width:1200px;
margin:auto;
padding:60px 20px 50px;
text-align:center;
}

#welcomeText{
font-size:34px;
font-weight:800;
margin-bottom:8px;
}

.subtitle{
color:#777;
margin-bottom:40px;
font-size:15px;
}

/* CARDS GRID */
.cards{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:24px;
width:100%;
}

.card{
background:white;
padding:26px;
border-radius:22px;
box-shadow:var(--shadow);
cursor:pointer;
transition:.25s ease;
border:2px solid transparent;
text-align:center;
}

.card:hover{
transform:translateY(-6px);
border-color:var(--primary);
}

.card h3{
margin-bottom:10px;
font-size:16px;
font-weight:700;
}

.card p{
font-size:13px;
color:#777;
line-height:1.5;
}

/* Tablet */
@media(max-width:950px){
.cards{
grid-template-columns:repeat(2,1fr);
}
}

/* Mobile */
@media(max-width:600px){
.cards{
grid-template-columns:1fr;
}
#welcomeText{
font-size:24px;
}
.card{
padding:20px;
}
}

/* Paired hive style */
.hive-item{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:8px;
font-size:14px;
}
.hive-item span{
cursor:pointer;
}
</style>
</head>

<body>

<div class="topbar">

<button class="menu-btn" onclick="toggleMenu()">â˜°</button>

<div class="dropdown" id="menuDropdown">

<a onclick="openDemo()">ğŸ“Š Demo Dashboard</a>
<a onclick="pairHive()">â• Add New Hive</a>

<div class="section-title">Paired Hives</div>
<div id="dashboardList"></div>

<hr style="margin:12px 0;">

<a href="calculator.html">ğŸ¯ Honey Calculator</a>
<a href="learning.html">ğŸ“ Learning Centre</a>
<a href="market.html">ğŸ“ˆ Market Analysis</a>
<a href="chatbot.html">ğŸ¤– Kanasu Chatbot</a>
<a href="image-disease.html">ğŸ Bee Scan AI</a>
<a href="about.html">â„¹ï¸ About Project</a>

<hr style="margin:12px 0;">
<a onclick="logout()" style="color:#e74c3c;">Logout</a>

</div>

<h2>
<span style="color:black;">Kanasu </span>
<span style="color:#f4b400;">Bee House</span>
</h2>

</div>

<div class="main">

<h1 id="welcomeText">Loading...</h1>
<p class="subtitle">Ready to monitor your hive health?</p>

<div class="cards">

<div class="card" onclick="openDemo()">
<h3>ğŸ“Š Demo Dashboard</h3>
<p>Explore simulated analytics</p>
</div>

<div class="card" onclick="pairHive()">
<h3>â• Add New Hive</h3>
<p>Connect to registered hive</p>
</div>

<div class="card" onclick="location.href='calculator.html'">
<h3>ğŸ¯ Honey Calculator</h3>
<p>Estimate honey production</p>
</div>

<div class="card" onclick="location.href='videos.html'">
<h3>ğŸ“ Learning Centre</h3>
<p>Educational resources</p>
</div>

<div class="card" onclick="location.href='chatbot.html'">
<h3>ğŸ¤– Kanasu Chatbot</h3>
<p>AI hive assistant</p>
</div>

<div class="card" onclick="location.href='image-disease.html'">
<h3>ğŸ Bee Scan AI</h3>
<p>Disease detection tool</p>
</div>

</div>

</div>

<script>
let pairedHives=JSON.parse(localStorage.getItem("pairedHives"))||[];

function toggleMenu(){
menuDropdown.classList.toggle("active");
}

firebase.auth().onAuthStateChanged(user=>{
if(user){
firebase.database().ref("users/"+user.uid).once("value")
.then(snapshot=>{
let data=snapshot.val();
if(data && data.name){
welcomeText.innerHTML=
`<span style="color:black;">Welcome </span>
<span style="color:#f4b400;">${data.name}</span>`;
}else{
welcomeText.innerHTML="Welcome";
}
});
}else{
window.location.href="index.html";
}
});

function openDemo(){
window.location.href="dashboard.html";
}

function pairHive(){
let hiveId=prompt("Enter Hive ID");
if(!hiveId) return;
let pin=prompt("Enter Hive PIN");
if(!pin) return;
let customName=prompt("Enter Custom Hive Name");
if(!customName) return;

firebase.database().ref("hives/"+hiveId).once("value").then(snapshot=>{
if(!snapshot.exists()){
alert("Hive not found!");
return;
}
if(String(snapshot.val().pin)===String(pin)){
alert("Hive Paired Successfully!");
pairedHives.push({id:hiveId,name:customName});
localStorage.setItem("pairedHives",JSON.stringify(pairedHives));
renderList();
}else{
alert("Incorrect PIN");
}
});
}

function renderList(){
dashboardList.innerHTML="";
pairedHives.forEach((h,index)=>{
let div=document.createElement("div");
div.className="hive-item";
let name=document.createElement("span");
name.innerText="ğŸ "+h.name;
name.onclick=()=>{
localStorage.setItem("activeHiveId",h.id);
localStorage.setItem("activeHiveName",h.name);
window.location.href="live-dashboard.html";
};
let del=document.createElement("span");
del.innerText="âŒ";
del.onclick=()=>{
pairedHives.splice(index,1);
localStorage.setItem("pairedHives",JSON.stringify(pairedHives));
renderList();
};
div.appendChild(name);
div.appendChild(del);
dashboardList.appendChild(div);
});
}

function logout(){
firebase.auth().signOut().then(()=>window.location.href="index.html");
}

renderList();
</script>

</body>
</html>