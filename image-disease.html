<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bee Scan AI | Kanasu Bee House</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
--primary:#f4b400;
--dark:#1e293b;
--light-bg:#fcfcf9;
--white:#ffffff;
}

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Inter',sans-serif;
}

body{
background:var(--light-bg);
color:var(--dark);
min-height:100vh;
display:flex;
flex-direction:column;
}

/* NAVBAR */
nav{
padding:15px 5%;
background:var(--white);
display:flex;
justify-content:space-between;
align-items:center;
border-bottom:1px solid #eee;
position:sticky;
top:0;
z-index:1000;
}

.back-link{
text-decoration:none;
color:var(--dark);
font-weight:700;
font-size:14px;
}

/* MAIN WRAPPER */
.main-wrapper{
flex:1;
display:flex;
justify-content:center;
align-items:center;
padding:20px;
}

/* BORDER WRAPPER */
.scan-wrapper{
width:100%;
max-width:600px;
background:white;
border:3px solid #f4b400;
border-radius:20px;
box-shadow:0 15px 40px rgba(244,180,0,0.1);
overflow:hidden;
}

/* TITLE */
.scan-title{
text-align:center;
font-weight:800;
font-size:18px;
padding:18px;
border-bottom:1px solid #eee;
background:#fffdf5;
}

/* INNER CONTENT */
.content{
padding:25px;
}

/* Preview Card */
.preview-card{
border-radius:20px;
margin-bottom:20px;
overflow:hidden;
border:1px solid #e2e8f0;
}

/* Viewport */
.viewport{
width:100%;
aspect-ratio:1;
position:relative;
overflow:hidden;
border-radius:16px;
}

/* Elegant Dark Blue Gradient */
#status{
position:absolute;
inset:0;
background:linear-gradient(135deg,#0f172a,#1e293b);
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
color:white;
text-align:center;
}

#preview{
width:100%;
height:100%;
object-fit:cover;
display:none;
}

/* Scan bar */
.scan-bar{
display:none;
position:absolute;
width:100%;
height:4px;
background:#f4b400;
box-shadow:0 0 15px #f4b400;
animation:moveScan 2s linear infinite;
}

@keyframes moveScan{
0%{top:0}
100%{top:100%}
}

/* Buttons */
.button-grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
margin-bottom:15px;
}

.btn-action{
background:white;
border:1px solid #e2e8f0;
padding:14px;
border-radius:12px;
font-weight:700;
cursor:pointer;
text-align:center;
}

.btn-main{
width:100%;
background:#f4b400;
border:none;
padding:16px;
border-radius:12px;
font-weight:800;
cursor:pointer;
margin-top:10px;
}

/* Result */
.result-box{
margin-top:20px;
padding:20px;
background:#f8fafc;
border-radius:16px;
display:none;
border:1px solid #e2e8f0;
}

.download-btn{
width:100%;
background:#1e293b;
color:white;
border:none;
padding:14px;
border-radius:10px;
font-weight:700;
margin-top:15px;
cursor:pointer;
}

input[type="file"]{
display:none;
}
</style>
</head>
<body>

<nav>
<a href="welcome.html" class="back-link">‚Üê Dashboard</a>
<div style="font-weight:800;">
KANASU <span style="color:var(--primary)">BEE HOUSE</span>
</div>
</nav>

<div class="main-wrapper">
<div class="scan-wrapper">

<div class="scan-title">
BEE SCAN AI 
</div>

<div class="content">

<div class="preview-card">
<div class="viewport">

<div id="scanner" class="scan-bar"></div>

<div id="status">
<div style="font-size:3rem;">üì∏</div>
<div style="font-weight:700;font-size:14px;margin-top:10px;">
AWAITING IMAGE
</div>
<div style="font-size:12px;opacity:.7;margin-top:6px;">
Upload hive frame for AI analysis
</div>
</div>

<img id="preview">

</div>
</div>

<div class="button-grid">
<label for="imgInputCam" class="btn-action">üì∑ CAMERA</label>
<input type="file" id="imgInputCam" accept="image/*" capture="environment">

<label for="imgInputGal" class="btn-action">üñºÔ∏è GALLERY</label>
<input type="file" id="imgInputGal" accept="image/*">
</div>

<button class="btn-main" id="analyzeBtn" onclick="runScan()">
Identify Disease
</button>

<div id="result" class="result-box">
<div id="resultContent"></div>
<button class="download-btn" onclick="generateReport()">
üì• Download PDF Report
</button>
</div>

</div>
</div>
</div>

<script>
const camInput=document.getElementById("imgInputCam");
const galInput=document.getElementById("imgInputGal");
const preview=document.getElementById("preview");
const scanner=document.getElementById("scanner");
const status=document.getElementById("status");
const resultDiv=document.getElementById("result");
const resultContent=document.getElementById("resultContent");
const analyzeBtn=document.getElementById("analyzeBtn");

const handleFile=(e)=>{
const file=e.target.files[0];
if(file){
preview.src=URL.createObjectURL(file);
preview.style.display="block";
status.style.display="none";
resultDiv.style.display="none";
scanner.style.display="none";
}
};

camInput.onchange=handleFile;
galInput.onchange=handleFile;

async function runScan(){
if(!preview.src){
alert("Please upload or capture an image");
return;
}

scanner.style.display="block";
analyzeBtn.innerText="Analyzing Hive...";
resultDiv.style.display="none";

await new Promise(r=>setTimeout(r,2500));

scanner.style.display="none";
analyzeBtn.innerText="Identify Disease";
resultDiv.style.display="block";

resultContent.innerHTML=`
<b>üß† Prediction:</b> Possible Varroa Mite (Prototype)<br>
<b>Confidence:</b> Low ‚Äì Model under training<br><br>
<b>Recommended Actions:</b>
<ul style="padding-left:20px;line-height:1.6;">
<li>Inspect hive manually for mites</li>
<li>Confirm using sound + image correlation</li>
<li>Apply integrated pest management</li>
<li>Consult local apiculture officer</li>
</ul>
`;
}

async function generateReport(){
const {jsPDF}=window.jspdf;
const doc=new jsPDF();

doc.setDrawColor(180);
doc.rect(10,10,190,277);

doc.setFont("helvetica","bold");
doc.setFontSize(18);
doc.text("BEE SCAN AI REPORT",105,25,null,null,"center");

doc.setFontSize(12);
doc.text("Generated: "+new Date().toLocaleString(),20,40);

if(preview.src){
doc.addImage(preview.src,"JPEG",20,50,170,90);
}

let y=150;

doc.setFontSize(13);
doc.text("Prediction: Possible Varroa Mite (Prototype)",20,y);
y+=12;
doc.text("Confidence: Low ‚Äì Model under training",20,y);
y+=18;

doc.text("Recommended Actions:",20,y);
y+=12;
doc.text("- Inspect hive manually for mites",25,y); y+=10;
doc.text("- Confirm using sound + image correlation",25,y); y+=10;
doc.text("- Apply integrated pest management",25,y); y+=10;
doc.text("- Consult local apiculture officer",25,y);

doc.save("Bee_Scan_AI_Report.pdf");
}
</script>

</body>
</html>