<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Honey Calculator | Kanasu Bee House</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
--primary:#f4b400;
--dark:#1e293b;
--light-bg:#fcfcf9;
--white:#ffffff;
}

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Inter',sans-serif;
}

body{
background:var(--light-bg);
color:var(--dark);
min-height:100vh;
display:flex;
flex-direction:column;
}

/* NAVBAR */
nav{
padding:15px 5%;
background:var(--white);
display:flex;
justify-content:space-between;
align-items:center;
border-bottom:1px solid #eee;
position:sticky;
top:0;
z-index:1000;
}

.back-link{
text-decoration:none;
color:var(--dark);
font-weight:700;
font-size:14px;
}

/* OUTER WRAPPER */
.main-wrapper{
flex:1;
display:flex;
justify-content:center;
align-items:center;
padding:20px;
}

/* BORDER WRAPPER SAME AS CHATBOT */
.calculator-wrapper{
width:100%;
max-width:600px;
background:white;
border:3px solid #f4b400;
border-radius:20px;
box-shadow:0 15px 40px rgba(244,180,0,0.1);
overflow:hidden;
}

/* TITLE SECTION */
.calculator-title{
text-align:center;
font-weight:800;
font-size:18px;
padding:18px;
border-bottom:1px solid #eee;
background:#fffdf5;
}

.card{
padding:35px;
}

/* INPUTS */
.input-group{
margin-bottom:22px;
}

label{
font-size:13px;
font-weight:700;
display:block;
margin-bottom:8px;
color:#64748b;
}

input{
width:100%;
padding:14px;
border-radius:12px;
border:1px solid #e2e8f0;
font-size:14px;
transition:0.3s;
}

input:focus{
outline:none;
border-color:var(--primary);
box-shadow:0 0 0 3px rgba(244,180,0,0.1);
}

/* BUTTONS */
button{
width:100%;
padding:14px;
border:none;
border-radius:12px;
font-weight:700;
cursor:pointer;
margin-top:12px;
transition:0.2s;
}

.primary{
background:var(--primary);
color:white;
}

.primary:hover{
opacity:0.9;
}

.secondary{
background:#1e293b;
color:white;
}

/* RESULT BOX */
.result{
margin-top:30px;
padding:25px;
border-radius:18px;
background:#f8fafc;
display:none;
border:1px solid #e2e8f0;
}

.res-row{
display:flex;
justify-content:space-between;
margin-bottom:12px;
font-size:14px;
}

.res-row b{
font-weight:800;
}
</style>
</head>

<body>

<nav>
<a href="dashboard.html" class="back-link">‚Üê Dashboard</a>
<div style="font-weight:800;">
KANASU <span style="color:var(--primary)">BEE HOUSE</span>
</div>
</nav>

<div class="main-wrapper">

<div class="calculator-wrapper">

<div class="calculator-title">
HONEY CALCULATOR üçØ
</div>

<div class="card">

<div class="input-group">
<label>Honey Weight (kg)</label>
<input type="number" id="kg">
</div>

<div class="input-group">
<label>Price per kg (‚Çπ)</label>
<input type="number" id="price">
</div>

<div class="input-group">
<label>Total Cost (‚Çπ)</label>
<input type="number" id="cost">
</div>

<button class="primary" onclick="calculate()">Analyze Profit</button>
<button class="secondary" onclick="exportPDF()">Export Report</button>

<div id="result" class="result">
<div class="res-row"><span>Total Revenue</span><b id="rev"></b></div>
<div class="res-row"><span>Net Profit</span><b id="profit"></b></div>
<div class="res-row"><span>ROI</span><b id="roi"></b></div>
<div class="res-row"><span>Margin</span><b id="margin"></b></div>
<div class="res-row"><span>Break-even (kg)</span><b id="be"></b></div>
</div>

</div>
</div>
</div>

<script>
/* ORIGINAL LOGIC UNCHANGED */
function calculate(){
const kg=parseFloat(document.getElementById("kg").value);
const price=parseFloat(document.getElementById("price").value);
const cost=parseFloat(document.getElementById("cost").value);

if(isNaN(kg)||isNaN(price)||isNaN(cost)||kg<=0||price<=0){
alert("Please enter valid positive values.");
return;
}

const revenue=kg*price;
const profit=revenue-cost;
const roi=cost>0?((profit/cost)*100).toFixed(1):0;
const margin=revenue>0?((profit/revenue)*100).toFixed(1):0;
const breakEven=(cost/price).toFixed(2);

document.getElementById("result").style.display="block";

document.getElementById("rev").innerText="‚Çπ"+revenue.toLocaleString();
document.getElementById("profit").innerText="‚Çπ"+profit.toLocaleString();
document.getElementById("roi").innerText=roi+"%";
document.getElementById("margin").innerText=margin+"%";
document.getElementById("be").innerText=breakEven;
}

function exportPDF(){
if(document.getElementById("result").style.display==="none"){
alert("Please calculate first.");
return;
}

const { jsPDF } = window.jspdf;
const doc = new jsPDF();

doc.setDrawColor(180);
doc.rect(10, 10, 190, 277);

doc.setFont("helvetica", "bold");
doc.setFontSize(18);
doc.text("KANASU BEE HOUSE", 105, 30, null, null, "center");

doc.setFontSize(14);
doc.text("Honey Calculator Report", 105, 40, null, null, "center");

doc.setDrawColor(220);
doc.line(20, 50, 190, 50);

doc.setFont("helvetica", "normal");
doc.setFontSize(13);

let y = 70;

function addRow(label, value){
doc.text(label, 25, y);
doc.text(value.replace("‚Çπ","Rs "), 170, y, null, null, "right");
y += 12;
}

addRow("Total Revenue:", document.getElementById("rev").innerText);
addRow("Net Profit:", document.getElementById("profit").innerText);
addRow("ROI:", document.getElementById("roi").innerText);
addRow("Margin:", document.getElementById("margin").innerText);
addRow("Break-even (kg):", document.getElementById("be").innerText);

doc.setFontSize(11);
doc.text("Generated on: " + new Date().toLocaleString(), 25, y + 15);

doc.setFontSize(10);
doc.setTextColor(120);
doc.text("Smart Apiculture Platform | Kanasu Bee House", 105, 285, null, null, "center");

doc.save("Kanasu_Honey_Report.pdf");
}
</script>

</body>
</html>